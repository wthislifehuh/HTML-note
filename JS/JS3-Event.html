<!-- JavaScript Event Handling-->

<!-- ======================== HTML DOM ======================== 
    DOM: Document Object Model
    A cross-platform and language-independent convention for representing and interacting with objects in HTML, XHTML and XML documents
    HTML DOM: standard object model and programming interface for HTML
    A standard for how to get access to, modify, add or delete HTML elements

    When a web page is loaded, the browser creates a DOM of the page.
    The HTML DOM model is constructed as a tree of Objects:
    ** Refer to the DOM diagram: https://www.w3schools.com/js/js_htmldom.asp
    <html> is the ancestor (parent to its children) of all the other elements(descendants)
        children: <head>, <body>
        siblings: <head> and <body>
    
    The HTML DOM defines:
        - The HTML elements as objects
        - The properties of all HTML elements
        - The methods to access all HTML elements
        - The events for all HTML elements

    HTML DOM methods: actions you can perform (on HTML Elements)
    HTML DOM properties: values (of HTML Elements) that can be set or changed
    
    Accessed with JavaScript:
    In the DOM, all HTML elements are defined as objects.
    Programming interface: the properties and methods of each object.
    Property: a value that you can get or set (like changing the content of an HTML element).
    Method: an action you can do (like add or deleting an HTML element).

    ======================== EVENT ======================== 
    Event: actions/occurrences that happen in the system you are programming/can be detected by your browser
    Event handler: a block of code (usually a JavaScript function that you as a programmer create) that will be run when the event fires
    Event listeners: a procedure or function in a computer program that waits/listen out for an event to occur
    HTML DOM Events: actions that can be performed when a user or browser manipulates a page


    ======================== JavaScript DOM Objects ======================== 
    HTML DOM objects: the objects that define all the HTML elements in a web page
    getElementById(id): returns array of descendents with the given id
    getElementsByTagName(tagName): returns array of descendents with the given tag name
    getElementByName(name): returns array of descendents with the given name (most useful for accessing form controls)
    getElementsByClassName(className): returns array of descendents with the given class name
    querySelectorALl*: returns array of descendents with the given selector
    querySelectorAll(selector): returns array of descendents with the given selector
    querySelector*: returns the first element that matches the given selector
    querySelector(selector): returns the first element that matches the given selector
    document.body: returns the body element
-->



<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <title> JavaScript </title>
</head>

<body>
    <!-- ===================== JS script in Body ===================== -->
    <script>
        /* ===================== Finding HTML Elements ===================== */
        document.getElementById("id"); // Find an element by element id
        document.getElementsByTagName("tag")[index]; // Find elements by tag name[index=which element]
        document.getElementsByClassName("class"); // Find elements by class name

        /* ===================== Changing HTML Elements ===================== */
        element.innerHTML = new content; // Change the inner HTML of an element
        element.attribute = new value; // Change the attribute value of an HTML element
        element.style.property = new style; // Change the style of an HTML element
        element.setAttribute(attribute, value); // Change the attribute value of an HTML element
        // EXTRA
        element.style.cssText = style; // Change the style of an HTML element
        element.setAttributeNS(namespaceURI, qualifiedName, value); // Change the attribute value of an HTML element
        element.removeAttribute(attribute); // Remove an attribute from an HTML element
        element.removeAttributeNS(namespaceURI, localName); // Remove an attribute from an HTML element
        element.classList.add("class"); // Add an HTML class

        /* ===================== Adding and Deleting Elements ===================== */
        document.createElement(element); // Create an HTML element
        document.removeChild(element); // Remove an HTML element
        document.appendChild(element); // Add an HTML element
        document.replaceChild(newone, old); // Replace an HTML element
        document.write(text); // Write into the HTML output stream
        
        /* ===================== Adding Events Handlers ===================== */
        document.getElementById(id).onclick = function(){code}; // Adding event handler code to an onclick event
        document.getElementById(id).addEventListener(event, function(){}); // Adding event handler code to many events
        document.getElementById(id).removeEventListener(event, function(){}); // Removing event handler code from an event
        document.getElementById(id).onload = function(){code}; // Adding event handler code to an onload event
        document.getElementById(id).onunload = function(){code}; // Adding event handler code to an onunload event
        document.getElementById(id).onchange = function(){code}; // Adding event handler code to an onchange event
        document.getElementById(id).onmouseover = function(){code}; // Adding event handler code to an onmouseover event
        document.getElementById(id).onmouseout = function(){code}; // Adding event handler code to an onmouseout event
        document.getElementById(id).onmousedown = function(){code}; // Adding event handler code to an onmousedown event
        document.getElementById(id).onmouseup = function(){code}; // Adding event handler code to an onmouseup event
        document.getElementById(id).onfocus = function(){code}; // Adding event handler code to an onfocus event
        document.getElementById(id).onblur = function(){code}; // Adding event handler code to an onblur event
        document.getElementById(id).onkeydown = function(){code}; // Adding event handler code to an onkeydown event
        document.getElementById(id).onkeypress = function(){code}; // Adding event handler code to an onkeypress event
        document.getElementById(id).onkeyup = function(){code}; // Adding event handler code to an onkeyup event
        document.getElementById(id).onresize = function(){code}; // Adding event handler code to an onresize event
        document.getElementById(id).onscroll = function(){code}; // Adding event handler code to an onscroll event
        document.getElementById(id).onselect = function(){code}; // Adding event handler code to an onselect event
        document.getElementById(id).onsubmit = function(){code}; // Adding event handler code to an onsubmit event
        document.getElementById(id).onreset = function(){code}; // Adding event handler code to an onreset event
        document.getElementById(id).onabort = function(){code}; // Adding event handler code to an onabort event
        document.getElementById(id).onerror = function(){code}; // Adding event handler code to an onerror event
        document.getElementById(id).onloadstart = function(){code}; // Adding event handler code to an onloadstart event
        document.getElementById(id).onloadend = function(){code}; // Adding event handler code to an onloadend event
        document.getElementById(id).onprogress = function(){code}; // Adding event handler code to an onprogress event
        document.getElementById(id).ondurationchange = function(){code}; // Adding event handler code to an ondurationchange event
        document.getElementById(id).onloadedmetadata = function(){code}; // Adding event handler code to an onloadedmetadata event
        document.getElementById(id).onloadeddata = function(){code}; // Adding event handler code to an onloadeddata event
        document.getElementById(id).oncanplay = function(){code}; // Adding event handler code to an oncanplay event
        document.getElementById(id).oncanplaythrough = function(){code}; // Adding event handler code to an oncanplaythrough event
        document.getElementById(id).onplaying = function(){code}; // Adding event handler code to an onplaying event
        document.getElementById(id).onended = function(){code}; // Adding event handler code to an onended event
        document.getElementById(id).onemptied = function(){code}; // Adding event handler code to an onemptied event
        document.getElementById(id).onstalled = function(){code}; // Adding event handler code to an onstalled event
        document.getElementById(id).onsuspend = function(){code}; // Adding event handler code to an onsuspend event
        document.getElementById(id).onwaiting = function(){code}; // Adding event handler code to an onwaiting event
        document.getElementById(id).onseeking = function(){code}; // Adding event handler code to an onseeking event
        document.getElementById(id).onseeked = function(){code}; // Adding event handler code to an onseeked event
        document.getElementById(id).onratechange = function(){code}; // Adding event handler code to an onratechange event
        document.getElementById(id).onvolumechange = function(){code}; // Adding event handler code to an onvolumechange event
        document.getElementById(id).onmessage = function(){code}; // Adding event handler code to an onmessage event
        document.getElementById(id).onopen = function(){code}; // Adding event handler code to an onopen event
        document.getElementById(id).onclose = function(){code}; // Adding event handler code to an onclose event
        document.getElementById(id).ononline = function(){code}; // Adding event handler code to an ononline event
        document.getElementById(id).onoffline = function(){code}; // Adding event handler code to an onoffline event
        document.getElementById(id).onpopstate = function(){code}; // Adding event handler code to an onpopstate event
        document.getElementById(id).onstorage = function(){code}; // Adding event handler code to an onstorage event
        document.getElementById(id).onhashchange = function(){code}; // Adding event handler code to an onhashchange event
        document.getElementById(id).onpagehide = function(){code}; // Adding event handler code to an onpagehide event
        document.getElementById(id).onpageshow = function(){code}; // Adding event handler code to an onpageshow event
        document.getElementById(id).onbeforeunload = function(){code}; // Adding event handler code to an onbeforeunload event
        document.getElementById(id).oncontextmenu = function(){code}; // Adding event handler code to an oncontextmenu event
        document.getElementById(id).oninput = function(){code}; // Adding event handler code to an oninput event
        document.getElementById(id).oninvalid = function(){code}; // Adding event handler code to an oninvalid event
        document.getElementById(id).ondrag = function(){code}; // Adding event handler code to an ondrag event
        document.getElementById(id).ondragend = function(){code}; // Adding event handler code to an ondragend event
        document.getElementById(id).ondragenter = function(){code}; // Adding event handler code to an ondragenter event
        document.getElementById(id).ondragleave = function(){code}; // Adding event handler code to an ondragleave event
        document.getElementById(id).ondragover = function(){code}; // Adding event handler code to an ondragover event
        document.getElementById(id).ondragstart = function(){code}; // Adding event handler code to an ondragstart event
        document.getElementById(id).ondrop = function(){code}; // Adding event handler code to an ondrop event
        document.getElementById(id).onmousewheel = function(){code}; // Adding event handler code to an onmousewheel event
        document.getElementById(id).onwheel = function(){code}; // Adding event handler code to an onwheel event
        document.getElementById(id).oncopy = function(){code}; // Adding event handler code to an oncopy event
        document.getElementById(id).oncut = function(){code}; // Adding event handler code to an oncut event
        document.getElementById(id).onpaste = function(){code}; // Adding event handler code to an onpaste event
        document.getElementById(id).onbeforecopy = function(){code}; // Adding event handler code to an onbeforecopy event
        document.getElementById(id).onbeforecut = function(){code}; // Adding event handler code to an onbeforecut event
        document.getElementById(id).onbeforepaste = function(){code}; // Adding event handler code to an onbeforepaste event
        document.getElementById(id).onaftercopy = function(){code}; // Adding event handler code to an onaftercopy event
        document.getElementById(id).onaftercut = function(){code}; // Adding event handler code to an onaftercut event
        document.getElementById(id).onafterpaste = function(){code}; // Adding event handler code to an onafterpaste event
        document.getElementById(id).onselect = function(){code}; // Adding event handler code to an onselect event
        document.getElementById(id).onselectstart = function(){code}; // Adding event handler code to an onselectstart event
        document.getElementById(id).onselectionchange = function(){code}; // Adding event handler code to an onselectionchange event
        document.getElementById(id).onfocus = function(){code}; // Adding event handler code to an onfocus event
        document.getElementById(id).onblur = function(){code}; // Adding event handler code to an onblur event
        document.getElementById(id).onchange = function(){code}; // Adding event handler code to an onchange event
        document.getElementById(id).onreset = function(){code}; // Adding event handler code to an onreset event
        document.getElementById(id).onsubmit = function(){code}; // Adding event handler code to an onsubmit event
        document.getElementById(id).onkeydown = function(){code}; // Adding event handler code to an onkeydown event
        document.getElementById(id).onkeypress = function(){code}; // Adding event handler code to an onkeypress event
        document.getElementById(id).onkeyup = function(){code}; // Adding event handler code to an onkeyup event

        /* ===================== DEMO ===================== */
        // Change the content of <p> elemtn with id='demo'
        document.getElementById("demo").innerHTML = "Hello World!";
        // getElementById() method returns the element that has the ID attribute with the specified value.
        // innerHTML property get/set or replace/change the HTML content (inner HTML: including <html>, <body>) of an element.


        // Change the value of the src attribute of an image
        document.getElementById("image").src = "pic_mountain.jpg";
        // getElementById() method returns the element that has the ID attribute with the specified value.
        // src property get/set or replace/change the src attribute of an image.


        // Change the value of the href attribute of a link
        document.getElementById("link").href = "https://www.w3schools.com";
        // getElementById() method returns the element that has the ID attribute with the specified value.
        // href property get/set or replace/change the href attribute of a link.


        /* ===================== WAY of USING WEB EVENTS ===================== */
        // 1. Inline event handler (not recommended) ================
        // Unmanageable and inefficient
        // HTML: <button onclick="alert('Hello World!')">Click Me!</button>
        function bgChange(){
            const rndCol = 'rgb(' + random(255) + ',' + random(255) + ',' + random(255) + ')';
            document.body.style.backgroundColor = rndCol;
        }
    
        
        // 2. Event Handler Properties  ================
        // Have less power and option, but better cross-browser compatibility
        // Change the value of background color
        const btn = document.querySelector("button"); // Store reference to the button element
        function random(number){
            return Math.floor(Math.random() * (number+1));
        }
        // Listening for click event firing by the button element
        btn.onclick = function(){
            const rndCol = 'rgb(' + random(255) + ',' + random(255) + ',' + random(255) + ')';
            document.body.style.backgroundColor = rndCol;
        }
        // getElementById() only works with ID attributes, while querySelector() can work with any CSS selector. 
        // getElementById() is faster than querySelector() because it only needs to search for one element, whereas querySelector() may need to search for multiple elements before returning the first match.


        // METHOD 1: 
        const buttons = document.querySelectorAll("button");
        for(let i = 0; i < buttons.length ; i++){
            buttons[i].onclick = bgChange;
        }
        // METHOD 2:
        buttons.forEach(button => {
            button.onclick = bgChange;
        });


        // 3. Event Listeners   ================
        // more powerful, more complex and less well supported
        // Way 1:
        const btn = document.querySelector("button"); // Store reference to the button element
        function bgChange(){
            const rndCol = 'rgb(' + random(255) + ',' + random(255) + ',' + random(255) + ')';
            document.body.style.backgroundColor = rndCol;
        }
        // Listening for click event firing by the button element
        btn.addEventListener("click", bgChange);
                            // event type, event handler

        // Way 2:
        btn.addEventListener("click", function(){
            const rndCol = 'rgb(' + random(255) + ',' + random(255) + ',' + random(255) + ')';
            document.body.style.backgroundColor = rndCol;
        });

        // Way 3: Register multiple handlers for the same listener
        myElement.addEventListener("click", functionA);
        myElement.addEventListener("click", functionB); // overwrites the value of onclick set by the first one
        

        /* ===================== Remove Event listener ===================== */
        // To remove a previously added listener: removeEventListener()
        // To have the same button performing different actions in different circumstances
        btn.removeEventListener("click", bgChange);

        /* ===================== DEMO ===================== */
        window.addEventListener("load", function() {
            alert("Hello World!");
        });
        window.addEventListener("load", start, false);
        window.onload = start;
        
        /* ===================== Event Objects ===================== 
        Event object is parameter specified with a name such as event, evt, or simply e in the event handler function.
        Their values are automatically passed to event handlers to provide extra features and information.*/
        
        // Example 1
        function bgChange(e){
            const rndCol = 'rgb(' + random(255) + ',' + random(255) + ',' + random(255) + ')';
            e.target.style.backgroundColor = rndCol;
            console.log(e);
        }
        btn.addEventListener("click", bgChange);
        // e.target refers to the button itself
        // target property of the event object is always a reference to the element that the event has just occurred upon

        // Example 2
        const divs = document.querySelectorAll("div");          // Select all <div>
        for(let i = 0; i<divs.length; i++){                     // Loop through each one
            //divs[i].addEventListener("click", bgChange);
            divs[i].onclick = function(e){                      // Add onclick handler to each
                e.target.style.backgroundColor = bgChange();    // Apply random color when clicked
            }
        }


        /* ===================== Prevent Default Behaviour ===================== */
        // Prevent an event from doing what it does by default
        // Default behavior of a submit button is for the data to be submitted to a specified page on the server for processing, 
        // and the browser to be redirected to the page of some kind (or the same page, if another is not specified.)

        const form = document.querySelector("form");
        const fname = document.getElementById("fname");
        const lname = document.getElementById("lname");
        const para = document.querySelector("p");
        form.addEventListener("submit", function(e){        // Listen for submit event
            if(fname.value === "" || lname.value === ""){   // If fname or lname is empty
                e.preventDefault();                         // Prevent form from being sent
                para.textContent = "You need to fill in both names!";
            }
        });


        /* ===================== Event Bubbling and Capture ===================== */
        // Event bubbling: When an event happens on an element, it first runs the handlers on it, then on its parent, then all the way up on other ancestors, until reaches <html> element
        // Event capturing: The event starts from the top element (outer most ancestor = <html>), move on to the next element inside <html> and goes down to the target element.

        // By default: event handlers are executed/registered in the bubbling phase
        // use addEventListener(type, listener, useCapture) to register event handlers in the bubbling phase (default) or in the capturing phase. 
        

        const btn = document.querySelector("button");
        const videoBox = document.querySelector("div");
        const video = document.querySelector("video");

        // Click button
        btn.onclick = function(){
            videoBox.setAttribute("class", "showing");  // change class attribute from hidden to css .showing
        }
        // Click video
        videoBox.onclick = function(){
            videoBox.setAttribute("class", "hidden");   // <div> hidden by css .hidden
        }
        // Stop bubbling: no more handlers will be run
        video.onclick = function(e){
            e.stopPropagation(); // stop bubbling
            video.play(); // Video inside <div> play
        }

    </script>
        
</body>

</html>